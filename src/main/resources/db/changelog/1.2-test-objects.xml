<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.24.xsd">

    <changeSet id="1.2-test-objects" author="Alexander Hermann" context="test">
        <comment>Creating test properties</comment>

        <!-- Test tenant -->
        <insert tableName="users">
            <column name="username" value="tenant1"/>
            <column name="email" value="tenant1@example.com"/>
            <column name="password" value="$2a$10$YourBcryptHashHere"/> <!-- pass: tenant123 -->
            <column name="enabled" valueBoolean="true"/>
        </insert>

        <!-- Test owner -->
        <insert tableName="users">
            <column name="username" value="owner1"/>
            <column name="email" value="owner1@example.com"/>
            <column name="password" value="$2a$10$YourBcryptHashHere"/> <!-- pass: owner123 -->
            <column name="enabled" valueBoolean="true"/>
        </insert>

        <!-- Linking roles -->
        <insert tableName="users_roles">
            <column name="user_id" valueComputed="(SELECT id FROM users WHERE username='tenant1')"/>
            <column name="role_id" valueComputed="(SELECT id FROM roles WHERE name='ROLE_TENANT')"/>
        </insert>

        <insert tableName="users_roles">
            <column name="user_id" valueComputed="(SELECT id FROM users WHERE username='owner1')"/>
            <column name="role_id" valueComputed="(SELECT id FROM roles WHERE name='ROLE_OWNER')"/>
        </insert>
    </changeSet>

    <changeSet id="1.2-2" author="Alexander Hermann" context="test">
        <comment>Creating test properties</comment>

        <insert tableName="properties">
            <column name="owner_id" valueComputed="(SELECT id FROM users WHERE username='owner1')"/>
            <column name="address" value="ул. Пушкина, д. 10"/>
            <column name="city" value="Москва"/>
            <column name="description" value="Уютная квартира в центре города"/>
            <column name="price_per_day" value="2500.00"/>
            <column name="is_available" valueBoolean="true"/>
        </insert>

        <insert tableName="properties">
            <column name="owner_id" valueComputed="(SELECT id FROM users WHERE username='owner1')"/>
            <column name="address" value="пр. Ленина, д. 25"/>
            <column name="city" value="Санкт-Петербург"/>
            <column name="description" value="Просторная квартира с видом на Неву"/>
            <column name="price_per_day" value="3200.00"/>
            <column name="is_available" valueBoolean="true"/>
        </insert>
    </changeSet>

</databaseChangeLog>